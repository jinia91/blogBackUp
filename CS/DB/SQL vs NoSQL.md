## 기본 개념

### DB(Database)의 정의

- 데이터베이스는 다수의 인원, 시스템 또는 프로그램이 사용할 목적으로 통합하여 관리되는 데이터 집합이다.


| 정의 | 설명 |
| --- | --- |
|통합된 데이터  | 자료의 중복을 배제한 데이터의 모임 |
| 저장된 데이터 | 저장매체에 저장된 데이터 |
| 운영 데이터 | 조직의 업무를 수행하는데 필요한 데이터 |
| 공용 데이터 | 여러 애플리케이션, 시스템들이 공동으로 사용하는 데이터 |

### DB 특성

|  |  |
| --- | --- |
| 실시간 접근성 | 쿼리에 대하여 실시간 응답이 가능해야함 |
| 계속적인 변화 | 새로운 데이터 삽입, 삭제 갱신으로 항상 최신의 데이터를 유지 |
|  동시 공용| 다수의 사용자가 동시에 같은 내용의 데이터를 이용할 수 있어야함 |
|  내용 참조| 데이터베이스에 있는 데이터를 참조할 때 데이터 레코드의 주소나 위치에 의해서가 아니라 사용자가 요구하는 데이터 내용을 데이터를 찾는다 |

### DBMS

> 데이터베이스 관리 시스템(database management system, DBMS)은 다수의 사용자들이 데이터베이스 내의 데이터를 접근할 수 있도록 해주는 소프트웨어 도구의 집합이다. DBMS은 사용자 또는 다른 프로그램의 요구를 처리하고 적절히 응답하여 데이터를 사용할 수 있도록 해준다.<br>
>\- 위키 백과


## RDB, RDBMS
관계형 데이터베이스(Relational Database,RDB)는 행과 열로 된 테이블에 데이터를 저장하고, 서로 관계된 데이터에 대한 접근을 제공하는 데이터베이스 유형이다. 

- 데이터는 엄격히 정해진 스키마를 따라 데이터베이스 테이블에 저장
- 관계를 통해서 여러 테이블에 분산

### 관계형 모델, 관계

RDB는 테이블을 여러 테이블로 **나누어 데이터 중복을 없애**고, 테이블간 **관계를 지정해 연결**할 수 있다.

![image](https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2FkOopi%2FbtqvYrNmNUW%2F2UNd4JSEA3YzIwUjDcxYYk%2Fimg.png)

[중복된 데이터는 테이블을 분리하고 FK로 관계를 맺어 연결한다!]

이렇게 데이터를 다루면 하나의 테이블에서 하나의 데이터만 관리하게 되기때문에 다른 테이블에서 부정확한 데이터를 다룰 위험이 없어지고 데이터의 일관성이 보장된다.

### SQL이란

![image](https://upload.wikimedia.org/wikipedia/commons/thumb/a/aa/SQL_ANATOMY_wiki.svg/1920px-SQL_ANATOMY_wiki.svg.png)

[sql 예시]

관계형 데이터베이스에서 주요한 특징 중 하나는 SQL(Structured Query Language)이라는 구조화된 질의어를 사용한다는 것이다.

 SQL은 RDBMS에서 데이터를 관리하기 위해 설계된 특수 목적의 프로그래밍 언어이다.   관계형 데이터베이스 관리 시스템에서 자료의 검색과 관리, 데이터베이스 스키마 생성과 수정, 데이터베이스 객체 접근 조정 관리를 위해 고안되었다. 많은 수의 데이터베이스 관련 프로그램들이 SQL을 표준으로 채택하고 있다.

### 엄격한 스키마

![image](https://t1.daumcdn.net/cfile/tistory/99BF063C5C937DF324)

데이터는 테이블과 레코드로 저장되며, 각 테이블에는 명확하게 정의된 구조(structure)가 있다. 구조는 필드의 이름과 데이터 유형으로 정의된다.

기본적으로 RDB에서는 스키마를 준수하지 않은 데이터는 추가될 수 없으며, 더많은 필드를 추가해 넣고싶다던가, null값을 넣고싶다던가 하는 일은 원칙적으론 허용되지 않는다.



## NoSQL

NoSQL은 하나로 정의된 특정 dbms를 칭하는것이 아니라 전통적인 RDBMS와 다른 DBMS를 지칭하기 위한 용어로

데이터 저장에 **고정된 테이블 스키마가 필요하지 않고** **조인(Join) 연산을 사용할 수 없으며(관계를 맺지 않으며)** **수평적으로 확장**이 수월한 DMBS를 뜻한다.

단어만 보면 SQL문을 사용안하는것 같지만 사실 SQL문을 사용하는 DBMS도 존재하므로  ‘Not Only SQL’이라고 읽는게 더 적절하다. 


### 주요 특징

**비정형화된 데이터에 적합하다**

빅데이터 시대에 정형화되지 않은 다양한 데이터들을 저장하기에 유용

**Soft State - Eventually Consitency**

관계형DB에서 가장 큰 장점은 데이터의 중복제거로 인한 일관성 유지이다. 하지만 NoSQL은 데이터의 중복을 허용하며, 수평적 확장이 수월한 분산형 시스템을 추구하므로 정보의 일관성을 유지하기가 어렵다. 

수많은 서버에 데이터를 분산 저장했는데 한 영역에 Update가 생길 시 그것을 실시간으로 다른 영역에 전파하는 것이 쉽지만은 않기 때문이다. 그래서 NoSQL은 특정 시점에서는 데이터의 일관성이 보장되지 않으며(Soft State), 일정 시간이 지나면 데이터의 일관성이 유지되는(Eventually Consitency) 특징을 갖는다.

**특정 도메인에 특화되있다**

SQL은 2차원 테이블에 모든 데이터를 일괄적으로 저장한다. 하지만 NoSQL은 Key-value, Graph 등의 자료형태로 데이터를 저장하는데 이로 인해 특정 도메인에서는 고성능을 낼 수 있다. 

> 소셜 네트워크를 사업 도메인으로 하는 회사에서 인간 관계는 모두 그래프이기 때문에 그래프 데이터베이스를 사용하면 그래프에 최적화된 API를 사용할 수 있고 데이터베이스 성능도 향상시킬 수 있다. 

**수직적 확장에 용이하다**

![image](https://i.stack.imgur.com/FKv1v.png)

- 데이터베이스 수직적 확장 : DB서버의 성능 향상(CPU, RAM ...)

- 데이터 베이스의 수평적 확장 : 더 많은 서버를 가용하여 DB를 분산시키는 것


RDB도 샤딩을 통해 수평적 확장을 꾀할수는 있지만, 어플리케이션 레벨에서 모든 샤딩을 제어해야하기때문에 운영 복잡도가 매우 높아지고 구현이 쉽지 않다.

반면 RDB는 집합-지향(Aggregate-oriented) 모델을 사용하여 분산저장을 기본적으로 지원한다.(Graph 방식은 예외) 따라서 연관된 데이터들이 함께 분산되므로, 관계형 모델에서처럼 복잡한 제어가 필요하지 않게 된다.

**분산처리 성능이 매우 빠르다**

NoSQL은 분산환경에서 데이터를 다루기 때문에 조회시 병렬로 검색이 가능하다. 

예를 들어 1PB 데이터에서 쿼리를 날리는 상황을 가정해보자

RDB라면 해당 쿼리를 1PB 용량만큼 IO를 일으켜 데이터를 찾아낼 것이나, NoSQL은 1TB 저스펙 서버 1000대를 묶어 1000대가 병렬로 검색을 진행하기 떄문에 훨씬 빠른 속도로 조회가 가능하다.


### NoSQL의 유형
![image](https://shoark7.github.io/assets/img/knowledge/nosql-data-model.jpg)

|  | 설명 |예시|
| --- | --- |---|
| Key-Value Store | 키 밸류 Map 자료구조 |Redis, DynamoDB|
| Column Family Data Store |Key안에 (Column,Value) 조합으로 여러개의 필드를 갖는 DB| Cassandra|
| Document Store | Json과 유사한 형태의 구조화된 데이터타입으로 복잡한 계층도 표현 가능 |MongoDB|
| Graph Store |시멘틱 웹과 온톨로지 분야에서 활용되는 그래프 자료구조 | AllegroGraph|



## 요약


| 특징 | RDB | NoSQL |
| --- | --- | --- |
| 질의 언어 | SQL | 유형마다 다양하며 SQL을 사용하기도 함 |
| 데이터 모델 | 2차원 테이블 | 유형마다 다양 |
| ACID | 완벽히 구현 | 완벽히 구현 X |
| 확장성 | 주로 수직적확장 | 수평적 확장도 용이 |
| 운영관리 | 전문가가 많아 상대적으로 용이 | 표준화 부족과 관련시장이 성숙하지 않아 고급인력 부족 |
| 복잡한 질의 | SQL로 해결 | 해결하기 어려움 |

